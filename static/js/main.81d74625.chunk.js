(this.webpackJsonplinear_regression_playground=this.webpackJsonplinear_regression_playground||[]).push([[0],{471:function(t,e,n){},481:function(t,e){},482:function(t,e){},490:function(t,e){},493:function(t,e){},494:function(t,e){},496:function(t,e,n){"use strict";n.r(e);var a=n(35),r=n(8),s=n.n(r),i=n(51),c=n.n(i),o=(n(471),n(4)),l=n.n(o),h=n(12),u=n(57),d=n(5),p=n(11),j=n(50),b=n(14),f=n(15),y=n(520),g=n(523),m=n(524);function O(){return Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{color:"secondary",position:"relative",children:Object(a.jsx)(g.a,{children:Object(a.jsx)(m.a,{variant:"h6",children:"Linear Regression with Gradient Descent Visualizer"})})})})}var x=n(52),v=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={width:800,height:800,shift:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,n,a,r,s,i,c,o,h,u,d,p,j,b,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(t,e,n){return t*e+n},e=this.state,n=e.width,a=e.height,r=e.shift,s=x.h("#working"),t.next=5,this.props;case 5:return c=t.sent,o=c.m,h=c.b,t.next=10,this.props.data;case 10:u=t.sent,d=i(o,0,h),p=i(o,n,h),j=x.e(u.y),b=[],f=0;case 16:if(!(f<u.X.length)){t.next=22;break}return t.next=19,b.push({x:u.X[f]/(u.X.length-1)*n,y:u.y[f]/j*(a-r)});case 19:f++,t.next=16;break;case 22:return console.log(b),console.log(u.y),t.next=26,s.selectAll("circle").data(b).enter().append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return a-t.y})).attr("r",5).style("fill","#F50257");case 26:return t.next=28,s.append("line").attr("x1",0).attr("y1",a-d).attr("x2",n).attr("y2",a-p).attr("stroke","black");case 28:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,n,a,r,s,i,c,o,h,u,d,p,j,b,f,y,g,m,O;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=function(t,e,n){return t*e+n},e=this.state,n=e.width,a=e.height,r=e.shift,s=x.h("#working"),c=this.props,o=c.m,h=c.b,u=c.ms,d=c.data,p=c.rsquared,j=c.darkness,b=x.f(j,20,1).map((function(t){return Math.pow(2,t)})),f=x.g(x.b(b),x.d),isFinite(o)&&isFinite(h)&&(y=x.e(d.y),d.y.length,g=d.X.length,m=i(o,d.X[0],h)/y*(a-r),O=i(o,d.X[g-1],h)/y*(a-r),s.select("line").transition().duration(200-u).attr("x1",0).attr("y1",a-m).attr("x2",n).attr("y2",a-O).style("stroke",f(p)));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.width,n=t.height;return Object(a.jsx)("svg",{style:{width:e,height:n},id:"working"})}}]),n}(r.Component),k=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={width:200,height:175,shift:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.width,n=t.height,a=t.shift,r=this.props,s=r.m,i=r.b,c=r.rsquared,o=r.data,l=r.darkness,h=x.h("#diff");if(isFinite(s)&&isFinite(i)){var u=function(t,e,n){return t*e+n},d=x.f(l,20,1).map((function(t){return Math.pow(2,t)})),p=x.g(x.b(d),x.d),j=x.e(o.y),b=(o.y.length,o.X.length),f=u(s,o.X[0],i)/j*(n-a),y=u(s,o.X[b-1],i)/j*(n-a);h.append("line").attr("x1",0).attr("y1",n-f).attr("x2",e).attr("y2",n-y).style("stroke",p(c)),0===s&&0===i&&h.selectAll("line").remove()}else h.selectAll("line").remove()}},{key:"render",value:function(){var t=this.state,e=t.width,n=t.height;return Object(a.jsx)("svg",{style:{width:e,height:n},id:"diff"})}}]),n}(r.Component),w=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={width:600,height:500},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,n,a,r,s,i,c,o,h,u,d,p,j,b,f,y,g;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b=function(t,e){for(var n=i.X,a=i.y,r=0,s=0;s<i.X.length;s++)r+=Math.pow(t*n[s]+e-a[s],2);return r/(2*n.length)},t.next=3,this.state;case 3:return e=t.sent,n=e.width,a=e.height,r=x.h("#divContour").select("#contour"),t.next=9,this.props;case 9:for(s=t.sent,i=s.data,c=s.darkness,o=n,h=a,u=new Array(o*h),d=.5,p=0;d<h;++d)for(j=.5;j<o;++j,++p)u[p]=b(j/o*10-5,d/h*20);return t.next=16,x.f(c,20,1).map((function(t){return Math.pow(2,t)}));case 16:f=t.sent,y=x.g(x.b(f),x.d),g=x.a().size([o,h]).thresholds(f)(u),r.append("g").attr("fill","none").selectAll("path").data(g).join("path").attr("fill",(function(t){return y(t.value)})).attr("d",x.c()),r.append("circle").attr("cx",n/2).attr("cy",0).attr("r",5).style("fill","none").style("stoke","none");case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.width,n=t.height,a=this.props,r=a.loss,s=a.ms,i=a.m,c=a.b,o=x.h("#divContour").select("#contour");null!=r?r<1e3&&o.select("circle").transition().duration(200-s).attr("cx",e/2+i/10*e).attr("cy",c/20*n).attr("r",2*r+5).style("fill","red").style("opacity","0.5"):o.select("circle").attr("cx",e/2).attr("cy",0).attr("r",5).style("fill","none").style("stroke","none")}},{key:"render",value:function(){var t=this.state,e=t.width,n=t.height;return Object(a.jsx)("div",{id:"divContour",children:Object(a.jsx)("svg",{style:{width:e,height:n},id:"contour"})})}}]),n}(r.Component),S=n(64),C=function(){function t(e,n,a){Object(d.a)(this,t),this.start=e,this.end=n,this.step=a}return Object(p.a)(t,[{key:"tensor_to_array",value:function(t){return Array.from(t.dataSync())}},{key:"output",value:function(t,e){this.size=t.length,this.output={X:t,y:e}}},{key:"exact_linear_data",value:function(){var t=this.tensor_to_array(S.range(this.start,this.end,this.step));this.output(t,t)}},{key:"random_linear_data",value:function(t){var e,n=this.tensor_to_array(S.range(this.start,this.end,this.step)),a=S.add(n,S.randomUniform([this.end-this.start],0,this.end/t));this.output(n,this.tensor_to_array((e=2,Math.floor(Math.random()*Math.floor(e))?S.reverse(S.round(a)):S.round(a))))}}]),t}(),D=n(538),X=n(525),_=n(526),F=n(527),M=n(528),R=n(530),q=n(533),B=n(539),P=n(534),A=n(540),T=n(536),E=n(541),z=n(535),L=n(36),U=n(529),W=n(531),I=n(532),N=n(64),J=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={mobile:!1,darkness:-8,playButton:!0,linreg:{meanSquaredError:0,rsquared:null,tensorData:{X:N.tensor([]),y:N.tensor([])},data:{X:[],y:[]},hyperparams:{learningRate:.03,epochs:0,loss:null,speed:200},tunableparams:{m:0,b:0}}},a.generateData=a.generateData.bind(Object(j.a)(a)),a.linearRegression=a.linearRegression.bind(Object(j.a)(a)),a.a=a.a.bind(Object(j.a)(a)),a.handleSlider=a.handleSlider.bind(Object(j.a)(a)),a.reset=a.reset.bind(Object(j.a)(a)),a}return Object(p.a)(n,[{key:"reset",value:function(){this.setState(Object(u.a)(Object(u.a)({},this.state),{},{playButton:!0,linreg:Object(u.a)(Object(u.a)({},this.state.linreg),{},{rsquared:null,hyperparams:Object(u.a)(Object(u.a)({},this.state.linreg.hyperparams),{},{epochs:0,loss:null}),tunableparams:{m:0,b:0}})}))}},{key:"generateData",value:function(){var t=new C(0,5,1);t.random_linear_data(3);var e=t.output,n=e.X,a=e.y,r=N.tensor(n),s=N.tensor(a),i=N.mean(s).dataSync()[0],c=1/(2*n.length)*N.sum(N.pow(N.sub(i,s),2)).dataSync()[0];this.setState({linreg:Object(u.a)(Object(u.a)({},this.state.linreg),{},{meanSquaredError:c,tensorData:{X:r,y:s},data:{X:n,y:a}})})}},{key:"linearRegression",value:function(){var t=this.state.linreg.tunableparams,e=t.m,n=t.b,a=this.state.linreg.hyperparams.learningRate,r=this.state.linreg.tensorData,s=r.X,i=r.y,c=function(t,e,n){return N.add(N.mul(t,e),n)}(s,e,n),o=s.shape[0];var l=1/o*N.sum(N.mul(N.sub(c,i),s)).dataSync()[0],h=1/o*N.sum(N.sub(c,i)).dataSync()[0],d=function(t,e){return 1/(2*o)*N.sum(N.pow(N.sub(e,t),2)).dataSync()[0]}(i,c);e+=-a*l,n+=-a*h;var p=1-d/this.state.linreg.meanSquaredError,j=this.state.linreg.hyperparams.epochs+1;this.setState({linreg:Object(u.a)(Object(u.a)({},this.state.linreg),{},{rsquared:p,tunableparams:{m:e,b:n},hyperparams:Object(u.a)(Object(u.a)({},this.state.linreg.hyperparams),{},{epochs:j,loss:d})})})}},{key:"a",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t){return new Promise((function(e){return setTimeout(e,t)}))},n=200;case 2:return a=this.state.linreg.hyperparams.speed,r=n-a,t.next=7,this.linearRegression();case 7:return t.next=9,e(r);case 9:if(!0!==this.state.playButton){t.next=11;break}return t.abrupt("break",13);case 11:t.next=2;break;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleSlider",value:function(t,e){this.setState({linreg:Object(u.a)(Object(u.a)({},this.state.linreg),{},{hyperparams:Object(u.a)(Object(u.a)({},this.state.linreg.hyperparams),{},{speed:e})})})}},{key:"handleClick",value:function(t){this.setState({anchorEl:t.currentTarget})}},{key:"componentDidMount",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateData();case 2:this.setState(Object(u.a)(Object(u.a)({},this.state),{},{mobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.linreg.tunableparams,n=e.m,r=e.b,s=this.state.linreg.hyperparams,i=s.loss,c=s.speed,o=s.epochs,l=s.learningRate,h=this.state.linreg,d=h.rsquared,p=h.data,j=this.props.classes,b=function(t){return null===t?"#dce0dd":"black"},f=function(t,e){return null===t?t:t.toPrecision(e)},y=Object(a.jsxs)(D.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",marginTop:2,children:[Object(a.jsx)(D.a,{marginRight:10,children:Object(a.jsx)(v,{data:p,m:n,b:r,ms:c,rsquared:null===i?0:i,darkness:this.state.darkness})}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(D.a,{display:"flex",children:Object(a.jsxs)(X.a,{className:j.root,children:[Object(a.jsxs)(D.a,{display:"flex",children:[Object(a.jsx)(D.a,{marginLeft:5,marginRight:5,children:Object(a.jsx)(k,{data:p,m:n,b:r,ms:c,rsquared:null===i?0:i,darkness:this.state.darkness})}),Object(a.jsx)(D.a,{children:Object(a.jsxs)(_.a,{children:[Object(a.jsxs)(m.a,{variant:"h3",component:"h2",children:["epoch: ",o]}),Object(a.jsx)(m.a,{variant:"h6",component:"h2",style:{color:b(i)},children:"loss = ".concat(f(i,10))}),Object(a.jsx)(m.a,{variant:"h6",component:"h2",style:{color:b(d)},children:" r^2 = ".concat(f(d,10))}),Object(a.jsx)(m.a,{variant:"h6",component:"h2",style:{color:0===(n&&r)?"#dce0dd":"black"},children:0===(n&&r)?"f(x) = mx + b":"f(x) = ".concat(n.toPrecision(3),"x + ").concat(r.toPrecision(3))})]})})]}),Object(a.jsx)(F.a,{children:Object(a.jsxs)(D.a,{display:"flex",children:[Object(a.jsx)(D.a,{display:"flex",margin:3,children:Object(a.jsx)(M.a,{onClick:this.reset,children:Object(a.jsx)(U.a,{})})}),Object(a.jsx)(D.a,{display:"flex",margin:3,children:Object(a.jsx)(R.a,{onClick:function(){t.setState({playButton:!t.state.playButton}),t.a()},style:{background:this.state.playButton?"#4caf50":"#f44336",color:"#FFFFFF"},children:this.state.playButton?Object(a.jsx)(W.a,{}):Object(a.jsx)(I.a,{})})}),Object(a.jsxs)(D.a,{display:"flex",margin:3,minWidth:200,children:[Object(a.jsx)(q.a,{style:{color:"#fdd835"},value:c/2,variant:"determinate"}),Object(a.jsx)(m.a,{variant:"caption",style:{color:"#fdd835"},children:"speed"}),Object(a.jsx)(B.a,{style:{marginTop:15,color:"#fdd835"},value:c,min:0,max:200,onChange:this.handleSlider})]}),Object(a.jsx)(D.a,{children:Object(a.jsxs)(P.a,{className:j.formControl,children:[Object(a.jsx)(A.a,{style:{color:"#606060"},children:"learning rate"}),Object(a.jsxs)(T.a,{style:{color:"#606060"},color:"secondary",value:l,onChange:function(e){t.setState({linreg:Object(u.a)(Object(u.a)({},t.state.linreg),{},{hyperparams:Object(u.a)(Object(u.a)({},t.state.linreg.hyperparams),{},{learningRate:e.target.value})})})},children:[Object(a.jsx)(E.a,{value:1,children:"1.0"}),Object(a.jsx)(E.a,{value:.1,children:"0.1"}),Object(a.jsx)(E.a,{value:.03,children:"0.03"}),Object(a.jsx)(E.a,{value:.01,children:"0.01"}),Object(a.jsx)(E.a,{value:.001,children:"0.001"}),Object(a.jsx)(E.a,{value:1e-4,children:"0.0001"}),Object(a.jsx)(E.a,{value:1e-5,children:"0.00001"})]})]})})]})})]})}),Object(a.jsx)(w,{ms:c,data:p,m:isFinite(n)?n:0,b:isFinite(r)?r:0,loss:i,darkness:this.state.darkness}),Object(a.jsx)(z.a,{onClick:function(){window.location.reload()},variant:"outlined",color:"primary",children:"New Data"}),Object(a.jsxs)(m.a,{variant:"h6",component:"h4",children:["x: ",p.X.toString()]}),Object(a.jsxs)(m.a,{variant:"h6",component:"h4",children:["y: ",p.y.toString()]})]})]}),g=Object(a.jsx)("h1",{children:"Right now this is only available for Desktop Browsers because I suck at formatting (will change in the future, hopefully)"});return Object(a.jsxs)("div",{children:[Object(a.jsx)(O,{}),this.state.mobile?g:y]})}}]),n}(r.Component),G=Object(L.a)((function(t){return{root:{minWidth:500},title:{fontSize:14},pos:{marginBottom:12},formControl:{margin:t.spacing(1),minWidth:120},selectEmpty:{marginTop:t.spacing(2)},details:{display:"flex",flexDirection:"column"}}}))(J),V=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,543)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),s(t),i(t)}))};c.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),V()}},[[496,1,2]]]);
//# sourceMappingURL=main.81d74625.chunk.js.map