(this.webpackJsonplinear_regression_playground=this.webpackJsonplinear_regression_playground||[]).push([[0],{473:function(t,e,n){},483:function(t,e){},484:function(t,e){},492:function(t,e){},495:function(t,e){},496:function(t,e){},498:function(t,e,n){"use strict";n.r(e);var a=n(35),r=n(8),s=n.n(r),i=n(51),c=n.n(i),o=(n(473),n(4)),l=n.n(o),u=n(12),h=n(61),d=n(5),p=n(11),j=n(50),b=n(14),f=n(15),y=n(521),g=n(524),m=n(525),x=n(526),O=n(527);function v(){return Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{color:"secondary",position:"static",children:Object(a.jsxs)(g.a,{children:[Object(a.jsx)(m.a,{variant:"h6",children:"Linear Regression with Gradient Descent"}),Object(a.jsx)(x.a,{href:"https://github.com/xnought/linear-regression-playground",edge:"end","aria-label":"menu",children:Object(a.jsx)(O.a,{})})]})})})}var k=n(21),w=n(57),S=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={width:800,height:800,shift:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,a,r,s,i,c,o,u,h,d,p,j,b,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(t,e,n){return t*e+n},e=this.state,n=e.width,a=e.height,r=e.shift,s=w.g("#working"),t.next=5,this.props;case 5:return c=t.sent,o=c.m,u=c.b,t.next=10,this.props.data;case 10:h=t.sent,d=i(o,0,u),p=i(o,n,u),j=Math.max.apply(Math,Object(k.a)(h.y)),b=[],f=0;case 16:if(!(f<h.X.length)){t.next=22;break}return t.next=19,b.push({x:h.X[f]/(h.X.length-1)*n,y:h.y[f]/j*(a-r)});case 19:f++,t.next=16;break;case 22:return console.log(b),console.log(h.y),t.next=26,s.selectAll("circle").data(b).enter().append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return a-t.y})).attr("r",3.5).style("fill","#F50257");case 26:return t.next=28,s.append("line").attr("x1",0).attr("y1",a-d).attr("x2",n).attr("y2",a-p).attr("stroke","black");case 28:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,a,r,s,i,c,o,u,h,d,p,j,b,f,y,g,m,x;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=function(t,e,n){return t*e+n},e=this.state,n=e.width,a=e.height,r=e.shift,s=w.g("#working"),c=this.props,o=c.m,u=c.b,h=c.ms,d=c.data,p=c.rsquared,j=c.darkness,b=w.e(j,20,1).map((function(t){return Math.pow(2,t)})),f=w.f(w.b(b),w.d),isFinite(o)&&isFinite(u)&&(y=d.y.length,g=d.X.length,m=i(o,d.X[0],u)/y*(a-r),x=i(o,d.X[g-1],u)/y*(a-r),s.select("line").transition().duration(200-h).attr("x1",0).attr("y1",a-m).attr("x2",d.X[g-1]/(g-1)*n).attr("y2",a-x).style("stroke",f(p)));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.width,n=t.height;return Object(a.jsx)("svg",{style:{width:e,height:n},id:"working"})}}]),n}(r.Component),X=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={width:200,height:175,shift:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.width,n=t.height,a=t.shift,r=this.props,s=r.m,i=r.b,c=r.rsquared,o=r.data,l=r.darkness,u=w.g("#diff");if(isFinite(s)&&isFinite(i)){var h=function(t,e,n){return t*e+n},d=w.e(l,20,1).map((function(t){return Math.pow(2,t)})),p=w.f(w.b(d),w.d),j=o.y.length,b=o.X.length,f=h(s,o.X[0],i)/j*(n-a),y=h(s,o.X[b-1],i)/j*(n-a);u.append("line").attr("x1",0).attr("y1",n-f).attr("x2",o.X[b-1]/(b-1)*e).attr("y2",n-y).style("stroke",p(c)),0===s&&0===i&&u.selectAll("line").remove()}else u.selectAll("line").remove()}},{key:"render",value:function(){var t=this.state,e=t.width,n=t.height;return Object(a.jsx)("svg",{style:{width:e,height:n},id:"diff"})}}]),n}(r.Component),C=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={width:600,height:500},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,a,r,s,i,c,o,u,h,d,p,j,b,f,y,g;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b=function(t,e){for(var n=i.X,a=i.y,r=0,s=0;s<i.X.length;s++)r+=Math.pow(t*n[s]+e-a[s],2);return r/(2*n.length)},t.next=3,this.state;case 3:return e=t.sent,n=e.width,a=e.height,r=w.g("#divContour").select("#contour"),t.next=9,this.props;case 9:for(s=t.sent,i=s.data,c=s.darkness,o=n,u=a,h=new Array(o*u),d=.5,p=0;d<u;++d)for(j=.5;j<o;++j,++p)h[p]=b(j/o*10-5,d/u*20);return t.next=16,w.e(c,20,1).map((function(t){return Math.pow(2,t)}));case 16:f=t.sent,y=w.f(w.b(f),w.d),g=w.a().size([o,u]).thresholds(f)(h),r.append("g").attr("fill","none").selectAll("path").data(g).join("path").attr("fill",(function(t){return y(t.value)})).attr("d",w.c()),r.append("circle").attr("cx",n/2).attr("cy",0).attr("r",5).style("fill","none").style("stoke","none");case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.width,n=t.height,a=this.props,r=a.loss,s=a.ms,i=a.m,c=a.b,o=w.g("#divContour").select("#contour");null!=r?r<1e3&&o.select("circle").transition().duration(200-s).attr("cx",e/2+i/10*e).attr("cy",c/20*n).attr("r",2*r+5).style("fill","red").style("opacity","0.5"):o.select("circle").attr("cx",e/2).attr("cy",0).attr("r",5).style("fill","none").style("stroke","none")}},{key:"render",value:function(){var t=this.state,e=t.width,n=t.height;return Object(a.jsx)("div",{id:"divContour",children:Object(a.jsx)("svg",{style:{width:e,height:n},id:"contour"})})}}]),n}(r.Component),D=n(64),_=function(){function t(e,n,a){Object(d.a)(this,t),this.start=e,this.end=n,this.step=a}return Object(p.a)(t,[{key:"tensor_to_array",value:function(t){return Array.from(t.dataSync())}},{key:"output",value:function(t,e){this.size=t.length,this.output={X:t,y:e}}},{key:"exact_linear_data",value:function(){var t=this.tensor_to_array(D.range(this.start,this.end,this.step));this.output(t,t)}},{key:"random_linear_data",value:function(t){var e,n=this.tensor_to_array(D.range(this.start,this.end,this.step)),a=D.add(n,D.randomUniform([this.end-this.start],0,this.end/t));this.output(n,this.tensor_to_array((e=2,Math.floor(Math.random()*Math.floor(e))?D.reverse(D.round(a)):D.round(a))))}}]),t}(),F=n(540),M=n(528),q=n(529),R=n(530),B=n(532),T=n(535),A=n(541),E=n(536),P=n(542),L=n(538),U=n(543),z=n(537),N=n(36),W=n(531),I=n(533),J=n(534),G=n(64),H=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={darkness:-8,playButton:!0,linreg:{meanSquaredError:0,rsquared:null,tensorData:{X:G.tensor([]),y:G.tensor([])},data:{X:[],y:[]},hyperparams:{learningRate:.03,epochs:0,loss:null,speed:200},tunableparams:{m:0,b:0}}},a.generateData=a.generateData.bind(Object(j.a)(a)),a.linearRegression=a.linearRegression.bind(Object(j.a)(a)),a.a=a.a.bind(Object(j.a)(a)),a.handleSlider=a.handleSlider.bind(Object(j.a)(a)),a.reset=a.reset.bind(Object(j.a)(a)),a}return Object(p.a)(n,[{key:"reset",value:function(){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{playButton:!0,linreg:Object(h.a)(Object(h.a)({},this.state.linreg),{},{rsquared:null,hyperparams:Object(h.a)(Object(h.a)({},this.state.linreg.hyperparams),{},{epochs:0,loss:null}),tunableparams:{m:0,b:0}})}))}},{key:"generateData",value:function(){var t=new _(0,5,1);t.random_linear_data(3);var e=t.output,n=e.X,a=e.y,r=G.tensor(n),s=G.tensor(a),i=G.mean(s).dataSync()[0],c=1/(2*n.length)*G.sum(G.pow(G.sub(i,s),2)).dataSync()[0];this.setState({linreg:Object(h.a)(Object(h.a)({},this.state.linreg),{},{meanSquaredError:c,tensorData:{X:r,y:s},data:{X:n,y:a}})})}},{key:"linearRegression",value:function(){var t=this.state.linreg.tunableparams,e=t.m,n=t.b,a=this.state.linreg.hyperparams.learningRate,r=this.state.linreg.tensorData,s=r.X,i=r.y,c=function(t,e,n){return G.add(G.mul(t,e),n)}(s,e,n),o=s.shape[0];var l=1/o*G.sum(G.mul(G.sub(c,i),s)).dataSync()[0],u=1/o*G.sum(G.sub(c,i)).dataSync()[0],d=function(t,e){return 1/(2*o)*G.sum(G.pow(G.sub(e,t),2)).dataSync()[0]}(i,c);e+=-a*l,n+=-a*u;var p=1-d/this.state.linreg.meanSquaredError,j=this.state.linreg.hyperparams.epochs+1;this.setState({linreg:Object(h.a)(Object(h.a)({},this.state.linreg),{},{rsquared:p,tunableparams:{m:e,b:n},hyperparams:Object(h.a)(Object(h.a)({},this.state.linreg.hyperparams),{},{epochs:j,loss:d})})})}},{key:"a",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t){return new Promise((function(e){return setTimeout(e,t)}))},n=200;case 2:return a=this.state.linreg.hyperparams.speed,r=n-a,t.next=7,this.linearRegression();case 7:return t.next=9,e(r);case 9:if(!0!==this.state.playButton){t.next=11;break}return t.abrupt("break",13);case 11:t.next=2;break;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleSlider",value:function(t,e){this.setState({linreg:Object(h.a)(Object(h.a)({},this.state.linreg),{},{hyperparams:Object(h.a)(Object(h.a)({},this.state.linreg.hyperparams),{},{speed:e})})})}},{key:"handleClick",value:function(t){this.setState({anchorEl:t.currentTarget})}},{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateData();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.linreg.tunableparams,n=e.m,r=e.b,s=this.state.linreg.hyperparams,i=s.loss,c=s.speed,o=s.epochs,l=s.learningRate,u=this.state.linreg,d=u.rsquared,p=u.data,j=this.props.classes,b=function(t){return null===t?"#dce0dd":"black"},f=function(t,e){return null===t?t:t.toPrecision(e)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),Object(a.jsxs)(F.a,{display:"flex",justifyContent:"center",marginTop:2,children:[Object(a.jsx)(F.a,{marginRight:10,children:Object(a.jsx)(S,{data:p,m:n,b:r,ms:c,rsquared:null===i?0:i,darkness:this.state.darkness})}),Object(a.jsxs)(F.a,{children:[Object(a.jsx)(F.a,{display:"flex",children:Object(a.jsxs)(M.a,{className:j.root,children:[Object(a.jsxs)(F.a,{display:"flex",children:[Object(a.jsx)(F.a,{marginLeft:5,marginRight:5,children:Object(a.jsx)(X,{data:p,m:n,b:r,ms:c,rsquared:null===i?0:i,darkness:this.state.darkness})}),Object(a.jsx)(F.a,{children:Object(a.jsxs)(q.a,{children:[Object(a.jsxs)(m.a,{variant:"h3",component:"h2",children:["epoch: ",o]}),Object(a.jsx)(m.a,{variant:"h6",component:"h2",style:{color:b(i)},children:"loss = ".concat(f(i,10))}),Object(a.jsx)(m.a,{variant:"h6",component:"h2",style:{color:b(d)},children:" r^2 = ".concat(f(d,10))}),Object(a.jsx)(m.a,{variant:"h6",component:"h2",style:{color:0===(n&&r)?"#dce0dd":"black"},children:0===(n&&r)?"f(x) = mx + b":"f(x) = ".concat(n.toPrecision(3),"x + ").concat(r.toPrecision(3))})]})})]}),Object(a.jsx)(R.a,{children:Object(a.jsxs)(F.a,{display:"flex",children:[Object(a.jsx)(F.a,{display:"flex",margin:3,children:Object(a.jsx)(x.a,{onClick:this.reset,children:Object(a.jsx)(W.a,{})})}),Object(a.jsx)(F.a,{display:"flex",margin:3,children:Object(a.jsx)(B.a,{onClick:function(){t.setState({playButton:!t.state.playButton}),t.a()},style:{background:this.state.playButton?"#4caf50":"#f44336",color:"#FFFFFF"},children:this.state.playButton?Object(a.jsx)(I.a,{}):Object(a.jsx)(J.a,{})})}),Object(a.jsxs)(F.a,{display:"flex",margin:3,minWidth:200,children:[Object(a.jsx)(T.a,{style:{color:"#fdd835"},value:c/2,variant:"determinate"}),Object(a.jsx)(m.a,{variant:"caption",style:{color:"#fdd835"},children:"speed"}),Object(a.jsx)(A.a,{style:{marginTop:15,color:"#fdd835"},value:c,min:0,max:200,onChange:this.handleSlider})]}),Object(a.jsx)(F.a,{children:Object(a.jsxs)(E.a,{className:j.formControl,children:[Object(a.jsx)(P.a,{style:{color:"#606060"},children:"learning rate"}),Object(a.jsxs)(L.a,{style:{color:"#606060"},color:"secondary",value:l,onChange:function(e){t.setState({linreg:Object(h.a)(Object(h.a)({},t.state.linreg),{},{hyperparams:Object(h.a)(Object(h.a)({},t.state.linreg.hyperparams),{},{learningRate:e.target.value})})})},children:[Object(a.jsx)(U.a,{value:1,children:"1.0"}),Object(a.jsx)(U.a,{value:.1,children:"0.1"}),Object(a.jsx)(U.a,{value:.03,children:"0.03"}),Object(a.jsx)(U.a,{value:.01,children:"0.01"}),Object(a.jsx)(U.a,{value:.001,children:"0.001"}),Object(a.jsx)(U.a,{value:1e-4,children:"0.0001"}),Object(a.jsx)(U.a,{value:1e-5,children:"0.00001"})]})]})})]})})]})}),Object(a.jsx)(C,{ms:c,data:p,m:isFinite(n)?n:0,b:isFinite(r)?r:0,loss:i,darkness:this.state.darkness}),Object(a.jsx)(z.a,{onClick:function(){window.location.reload()},variant:"outlined",color:"primary",children:"New Data"})]})]})]})}}]),n}(r.Component),K=Object(N.a)((function(t){return{root:{minWidth:500},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},formControl:{margin:t.spacing(1),minWidth:120},selectEmpty:{marginTop:t.spacing(2)},details:{display:"flex",flexDirection:"column"}}}))(H),Q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,545)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),s(t),i(t)}))};c.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(K,{})}),document.getElementById("root")),Q()}},[[498,1,2]]]);
//# sourceMappingURL=main.2f15c08b.chunk.js.map